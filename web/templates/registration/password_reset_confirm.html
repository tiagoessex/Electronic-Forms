{% extends 'auth_base.html' %}
{% load i18n static %}

{% block title %}{% trans "Enter new password" %}{% endblock %}

{% block content %}

{% if validlink %}

  <div class="text-center mb-3">
    <h3>{% trans 'NEW PASSWORD' %}</h3>
  </div>

  <form method="POST">
    {% csrf_token %}

    <input type="hidden" name="csrfmiddlewaretoken" value="xKZLPZQmS8cHew4KEXGlEn7BvduWKvUkDdcDQQxqrFT04met7sGMPtwl12YhAluS">
    
    <div class="input-group has-feedback mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text" id="basic-addon1"><i class="fas fa-lock"></i></span>
      </div>
        <input type="password" name="new_password1" autocomplete="new-password" placeholder="{% trans 'New Password' %}" required id="id_new_password1" class="form-control">            
    </div>

    {% if form.new_password1.errors %}
      {% for error in form.new_password1.errors %}
        <div class="alert alert-danger mt-1">
            {{ error }}
        </div>
      {% endfor %}
    {% endif %} 

    <div class="input-group has-feedback mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text" id="basic-addon1"><i class="fas fa-lock"></i></span>
      </div>
      <input type="password" name="new_password2" autocomplete="new-password" placeholder="{% trans 'Confirm Password' %}" required id="id_new_password2" class="form-control">            
    </div>

    {% if form.new_password2.errors %}
      {% for error in form.new_password2.errors %}
        <div class="alert alert-danger mt-1">
          {{ error }}
        </div>
      {% endfor %}
    {% endif %} 

    <div class="row">
      <div class="col text-center">
        <button type="submit" class="btn btn-primary btn-block">{% trans 'Change my password' %}</button>
      </div>
    </div>

</form>

{% else %}

  <p>{% trans "The password reset link was invalid, possibly because it has already been used.  Please request a new password reset." %}</p>
  <div class="row mt-4">
      <div class="col text-center">
          <a href="/" class="btn btn-primary btn-block">{% trans "Ok" %}</a>
      </div>
  </div>

{% endif %}

{% endblock %}

