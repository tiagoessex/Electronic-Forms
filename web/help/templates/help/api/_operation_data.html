<section id="operation-data">

    <div class="card shadow p-3 mb-5 bg-white rounded">
        <div class="card-header">
            <h3>Operation Data</h3>
        </div>

        <div class="card-body">

            <div class="card bg-dark text-white font-weight-bold text-monospace">
                <div class="card-body">
                    <span class="request-method">GET</span> {server}/rest/api/get_operation_data/{operation_id}/
                </div>
            </div>

            <p>Get the data (inputs and state) of a specific Operation, or an empty array if <i>operation_id</i> does not exist or there's no data (blank form maybe?).</p>

            <p>All assets (images and documents) are accessible at  
            <kbd>{server}/media/operation_assets/{operation_id}/{asset_file}</kbd>.</p>

            <span class="header-params">PATH PARAMETERS:</span>
            <hr>
            <div class="row ml-4">
                <dt class="col-2">operation_id</dt>
                <dt class="col-1"><span class="badge badge-secondary">number</span></dt>
                <dd class="col-9">ID of the operation</dd>
            </div>

            <br>

            <span class="header-params">HEADER PARAMETERS:</span>
            <hr>
            <div class="row ml-4">
                <dt class="col-2">Authorization</dt>
                <dt class="col-1"><span class="badge badge-secondary">-</span></dt>
                <dd class="col-9">Token [token]</dd>
            </div>

            <br>

            <span class="header-params">RESPONSES:</span>
            <hr>

            <div class="response-success p-2">
                <div class="response-title">200 Successful</div>
                Operation details.
            </div>
            <br>
            <div class="response-error p-2">
                <div class="response-title">403 Forbidden</div>
                Invalid token or Authentication credentials were not provided.
            </div>

            <br>

            <span class="header-params">RESPONSE FIELDS DESCRIPTION:</span>
            <hr>
            
            <kbd>Global:</kbd>
            <br><br>
            <table class="table table-sm">
                <thead>
                    <tr>
                        <th>Field</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>id</td>
                        <td>integer</td>
                        <td>Operation's Data ID</td>
                    </tr>
                    <tr>
                        <td>operation</td>
                        <td>integer</td>
                        <td>Operation's ID</td>
                    </tr>
                    <tr>
                        <td>data</td>
                        <td>json</td>
                        <td>Data and status of each interactable field.
                        Three main sections:
                          <ul>
                            <li><i>elements</i>: state and input value of each field</li>
                            <li><i>extras</i>: extra information</li>
                            <li><i>annexes</i>: list of annexed files</li>
                          </ul>                   
                        </td>
                    </tr>                                                                                                      
                </tbody>
            </table>

            <br>
            <kbd>elements:</kbd>
            <br><br>
            <table class="table table-sm">
                <thead>
                    <tr>
                        <th>Field</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>id</td>
                        <td>string</td>
                        <td>Element's ID</td>
                    </tr>
                    <tr>
                        <td>value</td>
                        <td>string / json (*)</td>
                        <td>Value inputted by the user. It's type depends on the element's type.</td>
                    </tr>
                    <tr>
                        <td>enabled</td>
                        <td>boolean</td>
                        <td>Is the element active?</td>
                    </tr>
                    <tr>
                        <td>crossed</td>
                        <td>boolean</td>
                        <td>Is the element crossed?</td>
                    </tr>
                    <tr>
                        <td>visible</td>
                        <td>boolean</td>
                        <td>Is the element visible?</td>
                    </tr>
                    <tr>
                        <td>selected</td>
                        <td>boolean</td>
                        <td>Is the element selected? (only applicable to CHECKBOXES and RADIOS)</td>
                    </tr>
                    <tr>
                      <td>n_cols</td>
                      <td>number</td>
                      <td>Number of columns (only in TABLES elements)</td>
                    </tr>
                    <tr>
                      <td>n_rows</td>
                      <td>number</td>
                      <td>Number of rows (only in TABLES elements)</td>
                  </tr>
                </tbody>
            </table>

            <br>

            <kbd>extras:</kbd>
            <br><br>

            <p>Currently the only extra information for this field is to indicate whether or not a field is 
            required or not.
            This data is originated by the <i>Required</i> E/A and not by the <i>required</i> property that
            each field possesses.</p>

            <pre>
"extras": {
  "ELEMENT_ID": {
    "REQUIRED": true | false
  },
  ...
},</pre>

            <br>

            <kbd>annexes:</kbd>
            <br><br>

            <p>Simple list of filenames:</p>

            <pre>
"annexes": [
  FILENAME_1, FILENAME_2, ...
],</pre> 

            <kbd>value:</kbd>
            <br><br>
            Each <i>element</i> has a <i>value</i>, which depends on the element's type:
            <br><br>
              {% include 'help/api/_values.html' %}

            <br>

            <br>
            <span class="header-params">EXAMPLE:</span>
            <hr>            
            <h5>Request</h5>
            <span class="example-request m-2">{server}/rest/api/get_operation_data/96/</span>
            
            <br>
            <br>

            <h5>Response</h5>
            <div class="example-response text-monospace m-2 p-2">
                <pre>

[
  {
    "id": 128,
    "operation": 129,
    "data": {
      "elements": [
        {
          "id": "text_0",
          "value": "sdfsdsfsdfsdfsdf",
          "enabled": true,
          "crossed": false,
          "visible": true,
          "selected": false
        },
        ...
        {
          "id": "checkbox_1",
          "value": null,
          "enabled": true,
          "crossed": false,
          "visible": true,
          "selected": true
        }
      ],
      "extras": {
        "text_0": {
          "REQUIRED": true
        }
      },
      "annexes": [
        "_abc.csv",
        ...
      ]
    }
  }
]</pre>
            </div>
        </div>
    </div>

</section>