{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}Forms Manager{% endblock %}

{% block extra_head %}
	{{ block.super }}

	{% include 'formsmanager/_styles.html' %}

{% endblock %}

{% block no_heading %}
<div class="container-fluid">
	<div class="row mb-2">
		<div class="col-sm-6">
			<h1>{% trans "Forms Manager" %}
      </h1>
		</div>
		<div class="col-sm-6">
			<ol class="breadcrumb float-sm-right">
				<li class="breadcrumb-item">	<a href="{% url 'home' %}">{% trans "Home" %}
          </a>
				</li>
				<li class="breadcrumb-item active">{% trans "Forms Manager" %}</li>
			</ol>
		</div>
	</div>
</div>
<!-- /.container-fluid -->

{% endblock %}

{% block content %}

<div class="container-fluid">
	<div class="row">
		<div class="col-12">
			<div class="card">

				<!-- loading spinner -->
				<div id="manager-spinner" class="risk-spinner-overlay">
              		<i class="fa fa-sync-alt fa-spin" aria-hidden="true"></i>
            	</div>

				<div class="card-header with-border">

					<div class="btn-group" role="group" aria-label="Basic example">
						<button type="button" class="btn btn-outline-primary ml-5" id="btn-new-form" data-toggle="tooltip" title="{% trans 'Create a new blank form' %}">	<i class="fas fa-plus"></i> {% trans "Create New Form" %}</button>
						<button type="button" class="btn btn-outline-danger ml-1" id="btn-remove-temps" data-toggle="tooltip" title="{% trans 'Delete all temporary forms' %}">	<i class="fas fa-trash"></i> {% trans "Remove Temps" %}</button>

						<div class="form-inline m-0 p-0 ml-5">
							<label for="filter-status" class="mr-2">{% trans "Filter by Status" %}:</label>
							<select id="filter-status" class="custom-select">
								<option value="IN USE">{% trans "IN USE" %}</option>
								<option value="EDITABLE">{% trans "IN PROGRESS" %}</option>
								<option value="DISABLED">{% trans "DISABLED" %}</option>
								<option value="TEMPORARY">{% trans "TEMPORARY" %}</option>
								<option value="ALL" selected>{% trans "NO FILTER" %}</option>
							</select>
						</div>

				</div>
				<!-- /.card-header -->
				<div class="card-body" >
					<table id="table-forms" class="table table-bordered table-hover display nowrap table-sm" style="width:100%;">
						<thead>
							<tr>
								<th></th>
								<th>ID</th>
								<th>{% trans "Name" %}</th>
								<th>{% trans "Description" %}</th>
								<th>{% trans "Author" %}</th>
								<th>{% trans "Created in" %}</th>
								<th>{% trans "Last updated by" %}</th>
								<th>{% trans "Last update in" %}</th>
								<th>{% trans "Locked by" %}</th>
								<th>{% trans "Locked in" %}</th>
								<th>{% trans "Disabled by" %}</th>
								<th>{% trans "Disabled in" %}</th>
								<th>{% trans "Status" %}</th>
								<th>{% trans "Actions" %}</th>
							</tr>
						</thead>
						<tbody id='table-body' style='display: none;'>
              				{% for data in dataset %}
							<tr id="form-{{ data.id }}" data-id="{{ data.id }}" class="{% if data.status_name == 'TEMPORARY' %}temporary-row{% endif %}" data-status="{{ data.status_name }}">
								<td> </td>
								<td class="align-middle text-center">{{ data.id }}</td>
								<td class="align-middle">{{ data.name }}</td>
								<td class="align-middle">{% if data.description != null %} {{ data.description }} {% endif %}</td>
								<td class="align-middle">{{ data.author }}</td>
								<td class="align-middle">{{ data.date_created }}</td>
								<td class="align-middle">{% if data.updated_by %} {{data.updated_by}} {% endif %}</td>
								<td class="align-middle">{% if data.date_updated %} {{data.date_updated}} {% endif %}</td>
								<td class="align-middle">{% if data.locked_by %} {{data.locked_by}} {% endif %}</td>
								<td class="align-middle">{% if data.date_locked %} {{data.date_locked}} {% endif %}</td>
								<td class="align-middle">{% if data.disabled_by %} {{data.disabled_by}} {% endif %}</td>
								<td class="align-middle">{% if data.date_disabled %} {{data.date_disabled}} {% endif %}</td>
								<td class="align-middle  text-center">
									{{ data.status_name }}
								</td>
								<td class="align-middle text-center">
									<!--									
										OPERATIONS
									-->
								</td>
							</tr>
              				{% endfor %}
            			</tbody>
          			</table>
				</div>
				<!-- /.card-body -->
			</div>
			<!-- /.card -->
		</div>
		<!-- /.col -->
	</div>
	<!-- /.row -->
</div>
<!-- /.container-fluid -->



<!-- ----------------------------------- -->
<!-- MODALS -->
<!-- ----------------------------------- -->

<div id="modals-container"></div>



{% endblock %}

{% block extra_js %}

	{% include 'formsmanager/_scripts.html' %}

{% endblock %}

